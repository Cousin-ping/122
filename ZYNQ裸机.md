# ZYNQ裸机
**主要还是得耐得住寂寞啃UG585文档**
如果你的设计有PL部分，那么你需要生成比特流，否则不需要
## GPIO知识点
    GPIO是一个外设，用来对器件的引脚作观测(input)以及控制(output)
    MIO起到一个多路复用管理的作用
    每个GPIO可以独立且动态地编程，作为输入\输出以及中断模式
    GPIO被分成了44个bank,bank0,bank1通过MIO链接到PS的引脚
    bank2,bank3通过EMIO链接到PL
    软件通过一组存储映射的寄存器来控制GPIO
    GPIO BANK0[8:7]只能作为输出
    不管引脚设置为输出还是输入状态，data_ro寄存器(只读)都可以读出引脚的状态
    注意当外设没有通过MIO连接到GPIO的外设上时，此时DATA_RO寄存器的值是不可预测的
    DATA寄存器在GPIO被配置成输出的时候，该寄存器可以控制输出的数值
    DIRM用于控制IO引脚是作为输入还是输出，为0的时候关闭输出驱动，为1
        使能输出驱动
    OEN 当IO被配置为输出时，该寄存器用于打开/关闭使能。为0关闭输出使能
        为1打开输出使能
**MIO[8:7]在复位过程中作为VMODE引脚（作为输入），用于配置MIO BANK的电压，复位结束后只能作为输出信号**
### MIO分组
    MIO也是分组的，第一组bank0是0-15引脚
    第二组bank1是16-53引脚。。此处的分组和GPIO的分组不一样
    这两组是可以配置不同的电压（这个地方主要是看你板子电源怎么设计的）
## PS PL交互
### AXI-Lite交互
    通过该协议配合GP接口进行交互
    该协议需要时钟，
### AXI-Stream交互
### AXI-full交互
    该协议通过HP接口交互，这个方式难，暂时不做学习
## VGA时序与显示驱动
VGA的时序同步定义有几种不同的类型，一般入门阶段采用640*480 60Hz的例子来说明.
**如果你的板子上只有HDMI接口，那么写完VGA的驱动之后需要借助另一个IP 来实现VGA的驱动**
    HSync 行同步信号  水平方向 相当于在水平一行内写视频数据
    VSync 场同步信号  垂直方向 当所有行都刷新完了，相当于显示完一帧画面，才会继续触发场同步

## HDMI相关
### HDMI简介
**HDMI接口向下兼容DVI接口**
    从DVI接口（只能传输视频）发展而来是新一代的多媒体接口，可以传输无压缩音频和高分辨率视频信号
    能同时传输视频和音频，简化了设备的接口和连线
    DVI和HDMI在物理层都是TMDS标准传输数据
    TMDS 是最小化传输差分信号，使用差分信号传输高速串行数据，用两个引脚传输一路信号，利用两个引脚间的电压差的
    正负极性和大小来决定传输数据的数值（0或1）
### DVI与HDMI异同
    二者视频传输所使用的TMDS连接通过四个串行通道实现，独立的TMDS时钟通道为接收端提供接收的参考频率，保证数据在接收端能够正确恢复
    DVI 支持 RGB 4:4:4
    HDMI支持 RGB 4:4:4 YCrCb 4:4:4 YCrCb 4:2:2
### RGB与YUV（YCrCb）转换公式
    百度吧
### HDMI协议相关
    分为发送端(source)和接收端(sink)
    分为三个颜色通道 一个像素时钟通道，这4个通道都是利用TMDS
    颜色通道中除了8位颜色数据，还包括4位音频数据和2位控制数据
    需要注意蓝色通道的2位控制数据是 HSYNC VSYNC这是必须不可省略的，其余颜色通道的这两位可以不用
    HDMI协议在发送时会将数据打包然后串行发送给接收端，接收端需要把串行数据转换为并行数据。发送端需要编码然后并行转串行，接收端需要串行转并行

    在编码阶段，编码器将视频源中的像素数据 HDMI的音频/附加数据和行场同步信号这个三类，每一类都单独编码成10位的字符流
    编码完成后进入并转串阶段，把10位并行数据转换成串行数据，然后把他们从3个颜色通道发出去

**因为并转串是10：1所以你生成串行数据的速度要是实际像素时钟（并行数据速率）的10倍**
### DVI编码机制
在图像的行与行之间，以及视频的不同帧之间的时间间隔（消隐期）内，数据通道上传输的则是控制字符，VDE拉高的时候传输有效像素数据，拉低的时候传输其他数据
### HDMI编码机制
    该编码机制较为复杂最好参照官方手册上的说明图进行理解 此处只记录关键信息
*HDMI传输的消隐期除了传输控制字符外，还可以用于传输音频或者其他附加数据，比如字幕信息*
*4位音频和附加数据通过TERC4编码机制转换成10位 TERC4字符，然后在绿色和红色通道上传输音频的有效数据*
*HDMI协议在VDE拉高时传输视频有效数据，在ADE拉高时传输音频有效数据*

