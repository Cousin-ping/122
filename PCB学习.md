# PCB学习
## 正片与负片的概念
    正片(signal)一般用来走线
    负片(plane)一般用来做电源和GND
## 层叠管理内缩
    此参数在AD的层叠管理器中可以设置pullback distance那一栏就是
    一般是电源层相对地层内缩20h，也叫20h原则，这样可以使EMC更好
    H表示电源层与地层的距离
    要求地平面大于电源或信号层，这样有利于防止对外辐射干扰和屏蔽外界对自身的干扰，
    一般情况下在PCB设计的时候把电源层比地层内缩1mm基本上就可以满足20H的原则。
    例如GND相对于板子边缘内缩20mil,电源层相对于板子边缘内缩60mil
    这样GND和电源层间就相差40mil(1mm)，这样就满足需求了
**单击层叠管理器顶层那一栏的#健即可添加pullback distance的选项和其他选项**
## 规则设置相关
    AD的规则设置大致分为10大类
    electrical 电气性能规则包括间距 开路 短路等
    routing 走线规则包括线宽 过孔 差分走线等
    smt 贴片规则
    mask 阻焊规则
    plane 铜皮规则
    testpoint 测试规则
    manufactuing 生产规则
    high speed 高速规则 蛇形等长之类的
    placement 器件放置规则
    sigal integrity 类似信号完整性仿真
### 常见的过孔尺寸设置
    8mil孔径16mil过孔直径 一般选择这种
    10mil孔径20mil过孔直径
    12mil孔径24mil过孔直径
### 铺铜设置相关
    画的过程中尽量避免孤铜（孤立铜皮的产生），因为这是非常难生产的
    PlaneConnect 选择全连接 Direct connect 手工焊接考虑十字链接，但是这样载流能力弱，全连接是载流能力和散热强，不利于手工焊接
    PlaneClearance 一般选择 7-8mil太大的话在连续打孔的情况下会割裂地平面
    PolygonConnect 选择全连接 Direct connect
### mask阻焊设置相关
    SolderMaskExpansion 一般设置2.5mil
**电气规则 走线规则 铜皮规则是最重要的,设置好规则一定要使能，注意设置的优先级**
## 布局相关
    模块化预布局 器件排列功能
    依据我们的原理图的分开 交互 框架
    电源和GND设置为一个类 对电源的飞线先关闭，关闭之后进行信号分析
    电源模块最后放
    然后再对每一个模块进行细致的布局
### DSP-SDRAM-FLASH及拓扑结构分析
    T形拓扑 一个信号遇到一个点分开，像T字形一样
    菊花链拓扑 大概就是指一个信号从一个芯片到另一个芯片这种链式的结构 
    一般DDR用菊花链拓扑，菊花链的信号好一些
    摆放SDRAM的滤波电容的时候遵循就近原则，放在离它近的引脚附近就行
    信号转换芯片和晶振也要就近摆放
### 视频输出VGA模块的布局
    主要是三路颜色数据的输出，建议把每一路都作为一个单独的小模块来处理
    这三路颜色输出要一字型布局，布局对齐，让信号走线更短
**1先大后小再定位芯片方向
2 局部模块还是先大后小
3 就近原则，基于原理图，基于飞线，上下拉匹配电阻也得就近原则
4 对齐等间距美观度优化调整，让元器件密度均匀一下**
### 视频输入模块布局
### RJ45网口模块布局
### 电源部分布局
    布局电源是先找输入输出主干道
    1找出电源（从哪输入）从哪里来到到哪里去（给那个芯片供电）
    2飞线定位摆放顺序 局部模块化
    3先找主干道，找出主干道上的器件（先摆这些器件），然后再摆放反馈 使能 以及配置的电容电阻（先摆大的电容电阻，就近原则）
### DSP外围电路布局以及整体布局优化
    一般主控芯片的电容放到背面，最后扇完孔再放
### VGA视频输出模块细节
    三路颜色数据要包地并且打屏蔽地孔
### 485通讯
    485走线尽量走类差分

**先布局再布线，按照原理图分模块布局**
## 布线相关
核心思路，先对飞线最密的部分进行布线，先连通后面再优化布线。布线之前先根据信号的流向进行优化
### SDRAM FLASH部分
    可以对SDRAM的信号进行分类，在类里面可以分为8位一组
    为每一把飞线进行颜色设置，这样便于区分
    记住我们本次采用的是菊花链拓扑，信号进出芯片是有顺序的，SDRAM1->SDRAM2->FLASH->CPLD
    尽量等间距走SDRAM的数据线，靠的太近会有串扰
    把BGA内部的焊盘引出走线，善用挪孔 合孔
### BGA扇孔之后的拉线技巧
    BGA扇孔结束之后，一定要给焊盘盖油，防止露铜造成短路，在系统设置的pcb editor里的defoult
    的via 里勾选solder mask那一栏的rule 下的2个tented也可以通过批量选中BGA的过孔，在属性里修改。（普通过孔可以不盖油）
    扇孔结束之后，给飞线分组
    如果实在是不好出，可以把前面两层的过孔引到芯片外面（选中多个过孔m+s选中参考点之后再移动）（GND和VCC就不用挪出来了）
    拉线的时候，先不要管DRC规则报错，先拉通，然后再调整
### 常见BGA的设计参数
    pitch间距（BGA内部相邻焊盘的间距） 0.8mm
    via常用大小 8/16 10/18
    走线线宽：阻抗线宽5-6mil 一般厂家的走线极限最小距离是3mil（嘉立创是3.5mil）为了保证量产的废品率不要太高,我们一般设置为4mil

    pitch间距（BGA内部相邻焊盘的间距） 0.65mm
    via常用大小 8/16 8/14
    走线线宽：阻抗线宽4-5mil
    这种得通过挪孔的方式
    
    pitch间距（BGA内部相邻焊盘的间距） 0.5mm
    via常用大小 8/16 8/14
    走线线宽：阻抗线宽4-5mil
    这种极小间距的就得埋盲孔（一般大小是4/10mil），但是阶数越高成本越高，第一层打到底2层叫一阶，第一层打到第三层叫2阶，以此类推、
    埋盲孔打在焊盘中间（也是可以偏离中心一点的）。设置好埋盲孔之后就不能自动扇出了，你得手动复制打在焊盘中间
    芯片四周最外面的第一排焊盘就不用埋盲孔了，可以直接拉出去
### 小细节
    走线宽度20mil一般可以载流1A
    过孔0.5mm过1A
    电源部分铺铜之后，在铜皮上根据电流多少来打孔
    电源铺铜还是先铺主干道输入输出的，粗大的GND和VCC走线记得打孔
    晶振和它配套的电容走线时最好采用类似差分的走线方式来
    对晶振这种干扰源采取一个GND包地的布线策略来减小干扰
    网口和变压器进行走线的时候除了那几条差分线，其余连线的粗细至少20mil
    记住和外壳地相连的网络，也得铺铜
    磁珠走线可以宽一点
    一般来说PCB走线的最小间距是6-8mil，如果BGA比较密集的话4-6mil，当然这个也看板厂的工艺，比如嘉立创最小是3.5mil
    BGA扇孔，假设你的过孔孔径是n，那么过孔大小一般是(n*2)的基础上误差2mil
### PCB扇孔
    扇孔的概念  对于短线直接连线，长线采取拉线然后打孔，电源和GND采取就近打孔在拉线的方式
    扇孔的目的 缩短回流路径 打孔占位，拉线的时候可以避开打孔的区域，方便走线规划
    BGA扇孔采用自动扇出->器件选择扇出外面两行焊盘
## 快捷键备忘
    shift+w在走线过程中可以调用线宽选择线宽
    在PCB界面里先按下ctrl+a全选然后按下a，定位器件文本即可批量更改丝印和注释的位置
    按下n即可选择隐藏飞线或者显示飞线，或者手动去右下角PCB那一栏设置
    选中多个器件后，按下T+O+L 即可让元器件在指定区域紧密排列
    线选（线接触到的对象）默认快捷键是S+L可以设置个别的
    按住ctrl+鼠标点击就能高亮网络
    在想要设置为快捷操作的命令哪里悬停鼠标然后按下ctrl+左键就能自定义快捷键了，如果不起作用就说明快捷键冲突或者需要设置为英文输入法
    选中多个元器件，连按2下a就能选择不同的对齐操作了
    选中走线，按下shift+r就能实现走线的推挤操作了
    PCB捕获：
        ALL Layers：可以捕获所有层   Current Layer：只能捕获当前层   OFF：关闭捕获   
        （这三种捕获开关切换快捷键： Shift+E）

    选中多跟走线之后，u+m即可同时走多跟线（多跟拉线前先把线头去掉）
    如果PCB出现不能选中元器件的情况 按下shift+c清楚当前过滤器即可
    将鼠标放在出错处，按快捷键 SHIFT+V ，会提示你出错原因。
    忽略障碍物走线的设置
        忽略障碍物走线，致使强连，shift+r 有多种走线模式  你在走线状态的时候切换一下，切换到忽略障碍物走线，这样就是强制连线了
        执行菜单命令“DXP-Preferences-PCB Editor- Interactive Routing”
        【Routing Conflict Resolution】走线模式推荐勾选以下选项

        1） Ignore Obstacles 忽略障碍物走线

        2） Push Obstacles   推荐障碍物走线

        3） Walkaround Obstacle 围绕障碍物走线

        4） Stop At first Obsatcle 遇到障碍物即停止走线

        5） Autoroute On Current Layer 自动在当前层走线

        以上走线模式可以用系统默认快捷键“Shift+R”进行切换。

        【Interactive Routing Options】推荐勾选以下选项

        1） Automatically Remove Loops 自动移除回路
        【Dragging】拖动选择推荐勾选以下选项
        1） Avoid Obstacles（Snap Grid）按照格点躲避障碍物

        按住alt左键选中多根飞线，就能高亮这些飞线，这个功能常用于PCB的自动布线
        辅助
## 疑问
    一字型和L形电容布局？



## 原理图相关知识
    画完原理图之后，需要给每个元器件分配编号
    在工具 标注 原理图标注中进行自动标注